INCLUDE options/options.makejail

ARG badwolf_tag=13.2

FROM --entrypoint gh+AppJail-makejails/badwolf badwolf:${badwolf_tag}

CMD pw useradd -n badwolf -c "Minimalist and privacy-oriented WebKitGTK+ browser" -d /home/badwolf -s /bin/sh
CMD mkdir -p /home/badwolf/.local/share/badwolf/webkit-web-extension
CMD mkdir -p /home/badwolf/.config/badwolf
CMD chown -R badwolf:badwolf /home/badwolf

COPY usr

STOP

STAGE create

CMD --local xhost +

STAGE custom:badwolf_open

ARG display=:0
ARG url?

ENV DISPLAY=${display}
ENV URL=${url}

USER badwolf
RUN badwolf.sh
